# ğŸš€ RENDER.COM DEPLOYMENT GUIDE

Komplette Anleitung zum Deployment des LinktoFunnel AI Business Agent auf Render.com

---

## ğŸ¯ Warum Render?

- âœ… **GroÃŸzÃ¼giges Free Tier** - 750 Stunden/Monat kostenlos
- âœ… **Automatische HTTPS** - SSL-Zertifikate inklusive
- âœ… **Git-basiert** - Auto-Deploy bei Push
- âœ… **EU-Server** - Frankfurt fÃ¼r DSGVO-Compliance
- âœ… **Cron Jobs** - Kostenlose geplante Tasks
- âœ… **Background Workers** - FÃ¼r Telegram Bot
- âœ… **PostgreSQL** - Optional, auch im Free Tier

---

## ğŸ“‹ Was wird deployed?

Das System erstellt **3 Services** auf Render:

### 1. **Web Service** - API Server
- **Name:** `linktofunnel-api`
- **Typ:** Web Service (HTTP/HTTPS)
- **Port:** 3000
- **URL:** `https://linktofunnel-api.onrender.com`
- **Endpoints:**
  - `GET /` - API Info
  - `GET /health` - Health Check
  - `GET /api/agents` - List Agents
  - `POST /api/agents/product-scout` - Trigger Product Scout
  - `POST /api/agents/content-creator` - Trigger Content Creator
  - `POST /webhook/telegram` - Telegram Webhook
  - `POST /webhook/digistore24` - Digistore24 Webhook

### 2. **Worker Service** - Telegram Bot
- **Name:** `linktofunnel-telegram-bot`
- **Typ:** Background Worker
- **Funktion:** 24/7 Telegram Bot fÃ¼r Benachrichtigungen

### 3. **Cron Job** - Master Orchestrator
- **Name:** `linktofunnel-orchestrator`
- **Schedule:** TÃ¤glich um 9:00 Uhr
- **Funktion:** Automatische Marketing-Kampagnen

---

## ğŸš€ SCHNELLSTART (5 Minuten)

### Option A: Automatisches Deployment-Script

```bash
# 1. Script ausfÃ¼hren
./scripts/deploy-to-render.sh

# 2. Folge den Anweisungen
# Das Script wird:
# âœ“ Pre-deployment Checks durchfÃ¼hren
# âœ“ Code zu GitHub pushen
# âœ“ API Keys exportieren
# âœ“ Deployment-Anleitung zeigen
```

### Option B: Manuelle Schritte

```bash
# 1. Ã„nderungen committen & pushen
git add .
git commit -m "Deploy to Render"
git push

# 2. Render Dashboard Ã¶ffnen
# https://dashboard.render.com

# 3. Blueprint erstellen (siehe unten)
```

---

## ğŸ“ DETAILLIERTE ANLEITUNG

### Schritt 1: Vorbereitung

#### 1.1 API Keys konfigurieren

```bash
# Setup-Wizard ausfÃ¼hren
npm run keys:setup

# Oder Keys exportieren (wenn schon konfiguriert)
npm run keys:export
```

#### 1.2 Code zu GitHub pushen

```bash
git add .
git commit -m "Ready for Render deployment"
git push origin main  # oder dein Branch
```

---

### Schritt 2: Render Account

#### 2.1 Account erstellen (falls noch nicht vorhanden)

1. Gehe zu: https://render.com
2. Klicke auf "Get Started"
3. Registriere dich mit GitHub (empfohlen)

#### 2.2 GitHub Repository verbinden

1. Autorisiere Render fÃ¼r GitHub
2. WÃ¤hle dein Repository: `Samar220659/LinktoFunnel`

---

### Schritt 3: Blueprint Deployment

#### 3.1 Blueprint erstellen

1. **Dashboard Ã¶ffnen:** https://dashboard.render.com
2. **New â†’ Blueprint** klicken
3. **Repository auswÃ¤hlen:** `LinktoFunnel`
4. **Branch:** `main` (oder dein Feature-Branch)
5. **Blueprint-Datei:** Render erkennt automatisch `render.yaml`

#### 3.2 Services prÃ¼fen

Render zeigt dir die 3 Services aus der `render.yaml`:

```
âœ“ linktofunnel-api (Web Service)
âœ“ linktofunnel-telegram-bot (Worker)
âœ“ linktofunnel-orchestrator (Cron Job)
```

#### 3.3 Environment Variables konfigurieren

**FÃ¼r jeden Service** musst du die API Keys eingeben.

##### ğŸ”´ REQUIRED (Kritisch)

Diese Keys sind **zwingend erforderlich**:

```bash
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1...

# Optional: FÃ¼r Vault-Funktion
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1...

# Google Gemini AI (KOSTENLOS!)
GEMINI_API_KEY=AIzaSy...

# Telegram (fÃ¼r Benachrichtigungen)
TELEGRAM_BOT_TOKEN=123456789:ABCdef...
TELEGRAM_CHAT_ID=123456789
```

##### ğŸŸ¡ OPTIONAL (Empfohlen)

FÃ¼r erweiterte Features:

```bash
# OpenAI (fÃ¼r GPT-4, DALL-E)
OPENAI_API_KEY=sk-...

# Marketing-Tools
DIGISTORE24_API_KEY=ds24_...
GETRESPONSE_API_KEY=gr_...
SCRAPINGBEE_API_KEY=sb_...

# Social Media
TIKTOK_ACCESS_TOKEN=act...
INSTAGRAM_ACCESS_TOKEN=IG...
YOUTUBE_API_KEY=AIza...
PINTEREST_ACCESS_TOKEN=pina...
```

##### ğŸ” AUTO-GENERIERT

Render generiert automatisch:

```bash
MASTER_ENCRYPTION_KEY=<auto-generated>
```

#### 3.4 Deployment starten

1. Klicke **"Apply"**
2. Warte 2-3 Minuten
3. âœ… Services werden nacheinander deployed

---

### Schritt 4: Verifizierung

#### 4.1 API Server testen

Nach erfolgreichem Deployment:

```bash
# Deine URL (ersetze mit deiner echten URL)
API_URL="https://linktofunnel-api.onrender.com"

# Health Check
curl $API_URL/health

# Erwartete Antwort:
{
  "status": "healthy",
  "timestamp": "2024-11-07T...",
  "version": "1.0.0",
  "environment": "production",
  ...
}

# API Info
curl $API_URL/

# System Info
curl $API_URL/api/system/info
```

#### 4.2 Logs Ã¼berprÃ¼fen

1. Gehe zu deinem Service in Render
2. Klicke auf **"Logs"**
3. Du solltest sehen:

```
ğŸ” Running startup checks...

ğŸ“Š API Key Manager Status:
   Vault: âœ…
   Cache: 0 keys

ğŸ”‘ Critical Keys:
   âœ… GEMINI_API_KEY
   âœ… SUPABASE_URL

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   ğŸš€ LINKTOFUNNEL API SERVER STARTED     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   Environment: production
   Version: 1.0.0
   Port: 3000
   URL: http://localhost:3000
   Health: http://localhost:3000/health

âœ¨ Ready to receive requests!
```

#### 4.3 Telegram Bot testen

```bash
# Sende Nachricht an deinen Bot
# Der Bot sollte antworten und Befehle annehmen
```

---

## ğŸ›ï¸ KONFIGURATION

### Free Tier Limits

Render Free Tier bietet:

- âœ… **750 Stunden/Monat** fÃ¼r Web Services
- âœ… **Unbegrenzte Deployments**
- âœ… **100 GB Bandwidth/Monat**
- âš ï¸ **Services schlafen nach 15 Min InaktivitÃ¤t**
- âš ï¸ **Startup dauert ~30 Sekunden beim ersten Request**

### Auto-Deploy aktivieren

In `render.yaml` ist bereits aktiviert:

```yaml
autoDeploy: true
```

Jeder Push zu GitHub triggert automatisch ein Deployment!

### Umgebung Ã¤ndern

FÃ¼r Entwicklung:

```yaml
envVars:
  - key: NODE_ENV
    value: development  # statt production
```

### Region Ã¤ndern

FÃ¼r andere Regionen:

```yaml
region: oregon  # US West
region: singapore  # Asia
region: frankfurt  # EU (Standard)
```

---

## ğŸ”§ TROUBLESHOOTING

### Problem: "Service unavailable"

**Ursache:** Service ist eingeschlafen (Free Tier)

**LÃ¶sung:**
- Warte 30 Sekunden (Cold Start)
- Oder: Upgrade zu Paid Plan ($7/Monat fÃ¼r 24/7)

```bash
# Keep-alive mit Cron (kostenlos!)
# Erstelle einen Cron Job, der alle 14 Min die API aufruft
```

### Problem: "Missing environment variables"

**LÃ¶sung:**

```bash
# 1. In Render Dashboard gehen
# 2. Service auswÃ¤hlen
# 3. Environment Tab
# 4. Fehlende Keys hinzufÃ¼gen
# 5. Manual Deploy klicken
```

### Problem: "Build failed"

**HÃ¤ufige Ursachen:**

```bash
# 1. package.json fehlt
# LÃ¶sung: Committe package.json

# 2. Node-Version inkompatibel
# LÃ¶sung: In render.yaml setzen:
runtime: node
nodeVersion: 18  # oder 20

# 3. Dependencies fehlen
# LÃ¶sung: Lokal testen:
npm install
npm test
```

### Problem: API Keys nicht gefunden

**Debug:**

```bash
# Logs in Render checken
# Suche nach:
âš ï¸  API Key "GEMINI_API_KEY" not found

# LÃ¶sung:
# 1. Environment Variables in Render prÃ¼fen
# 2. Typos checken (GroÃŸ-/Kleinschreibung!)
# 3. Service neu starten
```

### Problem: Supabase Verbindung fehlschlÃ¤gt

**Debug:**

```bash
# 1. Supabase URL prÃ¼fen
curl https://dein-projekt.supabase.co

# 2. Keys validieren
# In Supabase Dashboard: Settings â†’ API

# 3. Network-Regeln prÃ¼fen
# Render IPs zu Supabase Whitelist hinzufÃ¼gen (falls aktiviert)
```

---

## ğŸ“Š MONITORING

### Health Checks einrichten

Render macht automatisch Health Checks auf `/health`

In `render.yaml`:

```yaml
healthCheckPath: /health
```

### Custom Domain verbinden

1. In Render Dashboard: Settings â†’ Custom Domain
2. Domain hinzufÃ¼gen: `api.deine-domain.com`
3. DNS Records setzen:

```
Type: CNAME
Name: api
Value: linktofunnel-api.onrender.com
```

### Uptime Monitoring (extern)

Kostenlose Tools:

- **UptimeRobot** - https://uptimerobot.com (50 Monitore kostenlos)
- **Better Uptime** - https://betteruptime.com
- **Pingdom** - https://pingdom.com

Konfiguration:

```
URL: https://linktofunnel-api.onrender.com/health
Interval: 5 Minuten
Method: GET
Expected: 200 OK
```

---

## ğŸ’° KOSTEN

### Free Tier (aktuell)

```
âœ… Web Service:      $0 (750h/Monat)
âœ… Worker:           $0 (750h/Monat)
âœ… Cron Jobs:        $0 (unbegrenzt)
âœ… PostgreSQL:       $0 (1GB Storage)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   GESAMT:           $0/Monat
```

### Wenn du skalierst (optional)

```
ğŸš€ Starter Plan:     $7/Monat pro Service
   â€¢ 24/7 aktiv (kein Sleep)
   â€¢ Schnellerer Start
   â€¢ Mehr Ressourcen

ğŸš€ Standard Plan:    $25/Monat
   â€¢ Dedicated CPU
   â€¢ Auto-Scaling
   â€¢ Priority Support
```

---

## ğŸ”„ UPDATES & WARTUNG

### Automatische Updates

```bash
# 1. Code Ã¤ndern
# 2. Committen & Pushen
git add .
git commit -m "Update feature X"
git push

# 3. Render deployed automatisch! âœ¨
```

### Manuelles Deployment

Falls `autoDeploy: false`:

```bash
# In Render Dashboard:
# 1. Service auswÃ¤hlen
# 2. "Manual Deploy" Button
# 3. Branch wÃ¤hlen
# 4. Deploy klicken
```

### Rollback

```bash
# In Render Dashboard:
# 1. Service â†’ Deploys
# 2. Alten Deploy auswÃ¤hlen
# 3. "Redeploy" klicken
```

---

## ğŸ” SICHERHEIT

### Environment Variables

âœ… **Sichere Speicherung:**
- VerschlÃ¼sselt in Render
- Nicht in Logs sichtbar
- Nicht in Git committed

### HTTPS

âœ… **Automatisch:**
- SSL-Zertifikate von Let's Encrypt
- Auto-Renewal
- TLS 1.3

### Rate Limiting

âœ… **Eingebaut:**
- 100 Requests/Minute pro IP
- Im `api-server.js` konfigurierbar

### CORS

âœ… **Konfiguriert:**
- FÃ¼r Frontend-Zugriff
- In `api-server.js` anpassbar

---

## ğŸ“š WEITERE RESSOURCEN

### Offizielle Docs

- ğŸ“– Render Docs: https://render.com/docs
- ğŸ“– Blueprint Guide: https://render.com/docs/blueprint-spec
- ğŸ“– Cron Jobs: https://render.com/docs/cronjobs

### Support

- ğŸ’¬ Render Community: https://community.render.com
- ğŸ“§ Support: support@render.com
- ğŸ› GitHub Issues: https://github.com/Samar220659/LinktoFunnel/issues

### Video Tutorials

- ğŸ¥ Render Quickstart: https://www.youtube.com/watch?v=...
- ğŸ¥ Node.js Deployment: https://www.youtube.com/watch?v=...

---

## âœ… CHECKLISTE

Vor dem Deployment:

- [ ] API Keys konfiguriert (`npm run keys:setup`)
- [ ] Code zu GitHub gepusht
- [ ] `render.yaml` vorhanden
- [ ] `api-server.js` funktioniert (`node api-server.js`)
- [ ] Supabase Datenbank eingerichtet

Nach dem Deployment:

- [ ] Health Check erfolgreich (`/health`)
- [ ] API erreichbar (`/`)
- [ ] Logs sehen gut aus
- [ ] Telegram Bot antwortet
- [ ] Cron Job lÃ¤uft (nÃ¤chster Tag prÃ¼fen)

---

## ğŸ‰ FERTIG!

Deine API lÃ¤uft jetzt auf:

```
ğŸŒ https://linktofunnel-api.onrender.com
```

**Next Steps:**

1. âœ… API in Frontend einbinden
2. âœ… Telegram Bot Webhook setzen
3. âœ… Monitoring einrichten
4. âœ… Custom Domain verbinden (optional)
5. âœ… Erste Marketing-Kampagne starten! ğŸš€

Bei Fragen: Ã–ffne ein [GitHub Issue](https://github.com/Samar220659/LinktoFunnel/issues)

---

**Happy Deploying! ğŸš€**
